:root{
  --border:#ddd;
  --bg:#fff;
  --muted:#666;

  /* Keyboard sizing (desktop defaults) */
  --whiteW:26px;
  --whiteH:170px;
  --blackW:16px;
  --blackH:100px;
  --blackBottom:78px; /* how far black keys sit above the bottom */
  --keysPad:10px;
  --keysHeight:180px;

  /* 52 white keys from A0–C8 */
  --whiteKeyCount:52;
}

*{ box-sizing:border-box; }

html,body{ height:100%; }

body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin: 16px;
  line-height: 1.35;
  background: #fafafa;
  color:#111;
  /* helps reduce tap delay / accidental zoom */
  touch-action: manipulation;
}

h1{ margin:0 0 10px 0; font-size: 20px; }

.wrap{
  max-width: 1040px;
  margin: 0 auto;
  display: grid;
  gap: 12px;
}

.card{
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

/* Collapsible panels (used on mobile to reduce scrolling) */
details.panel > summary{
  list-style: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 0;
}
details.panel > summary::-webkit-details-marker{ display:none; }
details.panel > summary::after{
  content: "▾";
  font-size: 14px;
  opacity: 0.7;
}
details.panel[open] > summary::after{ content: "▴"; }
details.panel > *:not(summary){
  margin-top: 10px;
}

.row{
  display: grid;
  grid-template-columns: 1fr 220px;
  gap: 10px;
  align-items: center;
  margin-top: 10px;
}
.row:first-child{ margin-top:0; }

label{ font-weight: 650; }

input[type="range"], select, textarea{ width:100%; }

textarea{
  min-height: 90px;
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  font-size: 12px;
  resize: vertical;
}

/* Make form controls more thumb-friendly */
select, button, input[type="range"]{ min-height: 40px; }

button{
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: #fff;
  cursor: pointer;
}
button.primary{ background:#111; color:#fff; border-color:#111; }
button:disabled{ opacity:.5; cursor:not-allowed; }

.btns{ display:flex; gap:8px; flex-wrap:wrap; }

.mono{ font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }
.muted{ color: var(--muted); }

.two{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.three{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

.tabs{ display:flex; gap:8px; flex-wrap:wrap; }
.tab{
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  background:#fff;
}
.tab.active{ background:#111; color:#fff; border-color:#111; }

/* Keyboard container */
.kbd{
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow-x: scroll;           /* scroll only via the slider */
  overflow-y: hidden;
  scrollbar-width: none;        /* Firefox hide scrollbar */
  background: #fdfdfd;
  padding: var(--keysPad);
  touch-action: none;           /* prevent swipe scroll */
}
.kbd::-webkit-scrollbar{ display:none; }

.keys{
  position: relative;
  height: var(--keysHeight);
  min-width: calc(var(--whiteW) * var(--whiteKeyCount));
  user-select:none;
  touch-action: none;           /* enable drag-to-riff without page gestures */
}

.white{
  position:absolute;
  bottom:0;
  width: var(--whiteW);
  height: var(--whiteH);
  border:1px solid #bbb;
  background:#fff;
  border-radius: 0 0 6px 6px;

  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}
.white.active{ background:#e8f0ff; }

.black{
  position:absolute;
  bottom: var(--blackBottom);
  width: var(--blackW);
  height: var(--blackH);
  background:#111;
  border-radius: 0 0 6px 6px;
  z-index: 5;

  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}
.black.active{ background:#334; }

.keylabel{
  position:absolute;
  bottom:6px;
  left:4px;
  font-size: 10px;
  color:#333;
  pointer-events:none;
}
.keylabel.blackLbl{
  bottom:8px;
  left:2px;
  color:#fff;
  font-size: 9px;
}

.big{ font-size: 18px; font-weight: 750; }
.pill{
  display:inline-block;
  padding: 3px 8px;
  border-radius: 999px;
  border:1px solid var(--border);
  background:#fff;
  font-size: 12px;
}

/* Existing breakpoint */
@media (max-width: 860px){
  .two,.three{ grid-template-columns: 1fr; }
  .row{ grid-template-columns: 1fr; }
}

/* Phone-specific polish */
@media (max-width: 520px){
  body{ margin: 10px; }
  h1{ font-size: 18px; }

  /* Prevent iOS from zooming inputs by keeping font-size >= 16px */
  select, textarea, button, input{ font-size: 16px; }

  .card{ padding: 12px; }

  /* Tabs look better as equal-width buttons */
  .tabs{ gap:10px; }
  .tab{ flex: 1 1 0; text-align:center; }

  /* Make primary actions easy to tap */
  .btns{ width:100%; }
  .btns > button{ flex: 1 1 140px; }

  /* Bigger keys on phones (still scrollable) */
  :root{
    --whiteW:22px;
    --whiteH:140px;
    --blackW:14px;
    --blackH:90px;
    --blackBottom:68px;
    --keysHeight:155px;
    --keysPad:6px;
  }

  .keylabel{ display:none; }
}

.kbdScrollWrap{
  margin-top: 10px;
}
#kbdScroll{
  width: 100%;
  height: 34px; /* big */
  padding: 0;
}
#kbdScroll::-webkit-slider-thumb{
  height: 34px;
  width: 34px;
}
#kbdScroll::-moz-range-thumb{
  height: 34px;
  width: 34px;
}




/* Phone landscape: double key size */
@media (max-width: 920px) and (orientation: landscape){
  :root{
    --whiteW: 48px;
    --whiteH: 240px;
    --blackW: 32px;
    --blackH: 150px;
    --blackBottom: 90px;
  }
}
